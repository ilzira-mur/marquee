<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./page.css">
  <title>Анимация</title>
  </head>
  <body>
    <div class="marquee">
      <div class="inner">
        <span>
          <img class="img">
          <a class="marquee-text" target="_blank" href="https://www.youtube.com/">МЫ В РЕЙТИНГЕ</a>
          <img class="img">
          <a class="marquee-text" target="_blank" href="https://www.youtube.com/">THE LEGAL 500</a>
          <img class="img">
          <a class="marquee-text" target="_blank" href="https://www.youtube.com/">Best Lawyers</a>
          <img class="img">
          <a class="marquee-text" target="_blank" href="https://www.youtube.com/">ПРАВО 300</a>
          <img class="img">
          <a class="marquee-text" target="_blank" href="https://www.youtube.com/">Forbes</a>
          <img class="img">
          <a class="marquee-text" target="_blank" href="https://www.youtube.com/">Коммерсантъ</a>
        </span>
      </div>
    </div>
    <script>
      function handleMarquee(){
      	const marquee = document.querySelectorAll('.marquee');
      	let speed = 2;
      	let lastScrollPos = 0;
      	let timer;
      	
      	marquee.forEach(function(el){
      		const container = el.querySelector('.inner');
      		const content = el.querySelector('.inner > *');
      		const  elWidth = content.offsetWidth;
      		
      		
      		let clone = content.cloneNode(true);
      		container.appendChild(clone);
      		
      		let progress = 1;
      		function loop(){
      			progress = progress-speed;
      			if(progress <= elWidth*-1) {progress=0;}
      			container.style.transform = 'translateX(' + progress + 'px)';
      			container.style.transform += 'skewX(' + speed*0.4 + 'deg)';
      			
      			window.requestAnimationFrame(loop);
      		}
      		loop();
      	});
      	
      	window.addEventListener('scroll', function(){
      		const maxScrollValue = 12;
      		const newScrollPos = window.scrollY;
      		let scrollValue = newScrollPos - lastScrollPos;
      		
      		
      		if( scrollValue > maxScrollValue ) scrollValue = maxScrollValue;
          else if( scrollValue < -maxScrollValue ) scrollValue = -maxScrollValue;
      		
      		speed = scrollValue;
      		
      		clearTimeout(timer);
          timer = setTimeout(handleSpeedClear, 10);
      	});
      	
      	function handleSpeedClear(){
      		speed = 4;
      	}
      };
      
      handleMarquee();
    </script>
  </body>
</html>